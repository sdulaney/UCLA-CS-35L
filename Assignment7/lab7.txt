Laboratory: Managing a backported change

NOTE: Per the spec, this is a log of what I did in the lab so that I can reproduce the results later and I've briefly noted down what I did and what happened. Trivial commands may or may not be
explained.

1. Get a copy of the Diffutils repository, in Git format, from the file ~eggert/src/gnu/diffutils on the SEASnet GNU/Linux servers, or from its main Savannah repository.

git clone https://git.savannah.gnu.org/git/diffutils.git

2. Get a log of changes to Diffutils’ master branch using the “git log” command, and put it into the file git-log.txt.

cd diffutils/
git log > git-log.txt

3. Generate a list of tags used for Diffutils using the “git tag” command, and put it into the file git-tags.txt

git tag > git-tags.txt

4. Find the commit entitled “maint: quote 'like this' or "like this", not `like this'”, and generate a patch for that commit, putting it into the file quote-patch.txt.

git log --grep="maint: quote 'like this' or \"like this\", not \`like this'"

Output of previous command:
commit 62ca21c8c1a5aa3488589dcb191a4ef04ae9ed4f
Author: Paul Eggert <eggert@cs.ucla.edu>
Date:   Wed Jan 25 23:46:16 2012 -0800

    maint: quote 'like this' or "like this", not `like this'

    This is in response to a recent change in the GNU coding standards,
    which now suggest quoting 'like this' or "like this", instead of
    `like this' or ``like this''.
    * HACKING, NEWS, README, README-hacking, TODO, doc/diagmeet.note:
    * doc/diffutils.texi, ms/config.bat, ms/config.site:
    * src/analyze.c, src/cmp.c, src/context.c, src/diff.c:
    * src/diff.h, src/diff3.c, src/dir.c, src/ifdef.c, src/io.c:
    * src/sdiff.c, src/side.c, src/system.h, src/util.c:
    * tests/help-version:
    Quote 'like this' or "like this" in commentary.
    * cfg.mk (old_NEWS_hash): Adjust to reflect new NEWS quoting.
    * man/help2man: Update to 1.40.4 version, with quoting fixed as above.
    * po/en.po: Remove translation involving `, as it's no longer needed.
    * src/cmp.c (try_help, specify_ignore_initial, usage, main):
    * src/diff.c (main, try_help, option_help_msgid, specify_value)
    (compare_files):
    * src/diff3.c (main, try_help, option_help_msgid, usage)
    (read_diff):
    * src/dir.c (compare_names):
    * src/sdiff.c (try_help, usage, check_child_status, main):
    * src/util.c (finish_output):
    * tests/help-version:
    Quote 'like this' in output.

git format-patch -1 62ca21c8c1a5aa3488589dcb191a4ef04ae9ed4f --stdout > quote-patch.txt

5. Check out version 3.0 of Diffutils from your repository.

git checkout v3.0

6. Use the patch command to apply quote-patch.txt to version 3.0. In some cases it will not be able to figure out what file to patch; skip past those by typing RETURN. Record any problems you had in
applying the patch.

patch -p1 < quote-patch.txt

There were some files that the patch command couldn't find (in which case I skipped past by typing RETURN and "y"), and some files where the patch command failed patching some of its hunks. They are
listed below:
- HACKING (couldn't find)
- doc/diffutils.texi (couldn't find)
- man/help2man (couldn't find)
- README (failed patching some hunks of the file)
- README-hacking (failed patching some hunks of the file)
- cfg.mk (failed patching some hunks of the file)
- src/diff.c (failed patching some hunks of the file)
- src/diff3.c (failed patching some hunks of the file)

Output of previous command:
can't find file to patch at input line 62
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|From 62ca21c8c1a5aa3488589dcb191a4ef04ae9ed4f Mon Sep 17 00:00:00 2001
|From: Paul Eggert <eggert@cs.ucla.edu>
|Date: Wed, 25 Jan 2012 23:46:16 -0800
|Subject: [PATCH] maint: quote 'like this' or "like this", not `like this'
|
|This is in response to a recent change in the GNU coding standards,
|which now suggest quoting 'like this' or "like this", instead of
|`like this' or ``like this''.
|* HACKING, NEWS, README, README-hacking, TODO, doc/diagmeet.note:
|* doc/diffutils.texi, ms/config.bat, ms/config.site:
|* src/analyze.c, src/cmp.c, src/context.c, src/diff.c:
|* src/diff.h, src/diff3.c, src/dir.c, src/ifdef.c, src/io.c:
|* src/sdiff.c, src/side.c, src/system.h, src/util.c:
|* tests/help-version:
|Quote 'like this' or "like this" in commentary.
|* cfg.mk (old_NEWS_hash): Adjust to reflect new NEWS quoting.
|* man/help2man: Update to 1.40.4 version, with quoting fixed as above.
|* po/en.po: Remove translation involving `, as it's no longer needed.
|* src/cmp.c (try_help, specify_ignore_initial, usage, main):
|* src/diff.c (main, try_help, option_help_msgid, specify_value)
|(compare_files):
|* src/diff3.c (main, try_help, option_help_msgid, usage)
|(read_diff):
|* src/dir.c (compare_names):
|* src/sdiff.c (try_help, usage, check_child_status, main):
|* src/util.c (finish_output):
|* tests/help-version:
|Quote 'like this' in output.
|---
| HACKING            |  4 ++--
| NEWS               | 26 +++++++++++++-------------
| README             | 10 +++++-----
| README-hacking     |  2 +-
| TODO               |  2 +-
| cfg.mk             |  2 +-
| doc/diagmeet.note  |  2 +-
| doc/diffutils.texi |  2 +-
| man/help2man       | 33 +++++++++++++++++++--------------
| ms/config.bat      |  2 +-
| ms/config.site     |  2 +-
| po/en.po           | 14 +++-----------
| src/analyze.c      |  6 +++---
| src/cmp.c          | 20 ++++++++++----------
| src/context.c      | 10 +++++-----
| src/diff.c         | 40 ++++++++++++++++++++--------------------
| src/diff.h         |  8 ++++----
| src/diff3.c        | 26 +++++++++++++-------------
| src/dir.c          |  8 ++++----
| src/ifdef.c        |  2 +-
| src/io.c           |  4 ++--
| src/sdiff.c        | 22 +++++++++++-----------
| src/side.c         |  6 +++---
| src/system.h       |  6 +++---
| src/util.c         | 24 ++++++++++++------------
| tests/help-version | 12 ++++++------
| 26 files changed, 146 insertions(+), 149 deletions(-)
|
|diff --git a/HACKING b/HACKING
|index 3a99833..522e0b5 100644
|--- a/HACKING
|+++ b/HACKING
--------------------------
File to patch:
Skip this patch? [y] y
Skipping patch.
1 out of 1 hunk ignored
patching file NEWS
Hunk #1 succeeded at 30 (offset -28 lines).
Hunk #2 succeeded at 66 (offset -28 lines).
Hunk #3 succeeded at 106 (offset -28 lines).
Hunk #4 succeeded at 140 (offset -28 lines).
Hunk #5 succeeded at 184 (offset -28 lines).
Hunk #6 succeeded at 197 (offset -28 lines).
Hunk #7 succeeded at 209 (offset -28 lines).
Hunk #8 succeeded at 221 (offset -28 lines).
patching file README
Hunk #1 FAILED at 9.
Hunk #3 FAILED at 60.
2 out of 3 hunks FAILED -- saving rejects to file README.rej
patching file README-hacking
Hunk #1 FAILED at 19.
1 out of 1 hunk FAILED -- saving rejects to file README-hacking.rej
patching file TODO
patching file cfg.mk
Hunk #1 FAILED at 29.
1 out of 1 hunk FAILED -- saving rejects to file cfg.mk.rej
patching file doc/diagmeet.note
can't find file to patch at input line 249
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/doc/diffutils.texi b/doc/diffutils.texi
|index 58b140c..00403df 100644
|--- a/doc/diffutils.texi
|+++ b/doc/diffutils.texi
--------------------------
File to patch:
Skip this patch? [y] y
Skipping patch.
1 out of 1 hunk ignored
can't find file to patch at input line 262
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/man/help2man b/man/help2man
|index f9983f7..8bc961c 100755
|--- a/man/help2man
|+++ b/man/help2man
--------------------------
File to patch:
Skip this patch? [y] y
Skipping patch.
9 out of 9 hunks ignored
patching file ms/config.bat
patching file ms/config.site
Hunk #1 succeeded at 73 with fuzz 1.
patching file po/en.po
patching file src/analyze.c
patching file src/cmp.c
Hunk #1 succeeded at 36 with fuzz 1.
Hunk #4 succeeded at 185 (offset -6 lines).
Hunk #5 succeeded at 231 (offset -6 lines).
Hunk #6 succeeded at 257 (offset -6 lines).
Hunk #7 succeeded at 269 (offset -6 lines).
Hunk #8 succeeded at 364 (offset -6 lines).
Hunk #9 succeeded at 377 (offset -6 lines).
patching file src/context.c
Hunk #1 succeeded at 159 (offset 1 line).
Hunk #2 succeeded at 289 (offset 1 line).
Hunk #3 succeeded at 393 with fuzz 2 (offset 1 line).
Hunk #4 succeeded at 431 (offset 1 line).
Hunk #5 succeeded at 459 (offset 1 line).
patching file src/diff.c
Hunk #1 succeeded at 40 with fuzz 2 (offset -2 lines).
Hunk #2 succeeded at 57 (offset -2 lines).
Hunk #3 succeeded at 92 (offset -2 lines).
Hunk #4 succeeded at 330 (offset -10 lines).
Hunk #5 succeeded at 505 (offset -10 lines).
Hunk #6 succeeded at 534 (offset -10 lines).
Hunk #7 succeeded at 585 (offset -14 lines).
Hunk #8 succeeded at 744 (offset -14 lines).
Hunk #9 succeeded at 826 (offset -14 lines).
Hunk #10 FAILED at 876.
Hunk #11 FAILED at 906.
Hunk #12 FAILED at 942.
Hunk #13 succeeded at 960 with fuzz 2 (offset -29 lines).
Hunk #14 succeeded at 1159 with fuzz 2 (offset -32 lines).
3 out of 14 hunks FAILED -- saving rejects to file src/diff.c.rej
patching file src/diff.h
Hunk #2 succeeded at 126 with fuzz 2 (offset -13 lines).
Hunk #3 succeeded at 202 (offset -13 lines).
patching file src/diff3.c
Hunk #1 succeeded at 35 (offset 1 line).
Hunk #2 succeeded at 159 (offset 1 line).
Hunk #3 succeeded at 316 (offset 1 line).
Hunk #4 succeeded at 351 (offset 1 line).
Hunk #5 succeeded at 412 (offset 1 line).
Hunk #6 FAILED at 433.
Hunk #7 succeeded at 460 with fuzz 2 (offset -18 lines).
Hunk #8 succeeded at 1275 (offset -18 lines).
Hunk #9 succeeded at 1475 (offset -18 lines).
1 out of 9 hunks FAILED -- saving rejects to file src/diff3.c.rej
patching file src/dir.c
Hunk #1 succeeded at 84 (offset -1 lines).
Hunk #2 succeeded at 125 (offset -1 lines).
Hunk #3 succeeded at 154 (offset -1 lines).
Hunk #4 succeeded at 234 (offset -1 lines).
patching file src/ifdef.c
patching file src/io.c
patching file src/sdiff.c
Hunk #2 succeeded at 92 (offset 1 line).
Hunk #3 succeeded at 175 (offset 23 lines).
Hunk #4 succeeded at 230 (offset 17 lines).
Hunk #5 succeeded at 286 (offset 17 lines).
Hunk #6 succeeded at 572 (offset 13 lines).
Hunk #7 succeeded at 747 (offset 41 lines).
patching file src/side.c
patching file src/system.h
Hunk #2 succeeded at 105 (offset 6 lines).
patching file src/util.c
Hunk #4 succeeded at 190 with fuzz 2.
Hunk #8 succeeded at 650 (offset -27 lines).
patching file tests/help-version
Hunk #1 succeeded at 75 (offset 1 line).
Hunk #2 succeeded at 85 (offset 1 line).
Hunk #3 succeeded at 96 (offset 1 line).
Hunk #4 succeeded at 108 (offset 1 line).
Hunk #5 succeeded at 140 (offset 1 line).
Hunk #6 succeeded at 188 (offset 1 line).

7. Use the git status command to get an overview of what happened.

git status

Output of previous command:
HEAD detached at v3.0
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

  modified:   NEWS
  modified:   README
  modified:   TODO
  modified:   doc/diagmeet.note
  modified:   ms/config.bat
  modified:   ms/config.site
  modified:   po/en.po
  modified:   src/analyze.c
  modified:   src/cmp.c
  modified:   src/context.c
  modified:   src/diff.c
  modified:   src/diff.h
  modified:   src/diff3.c
  modified:   src/dir.c
  modified:   src/ifdef.c
  modified:   src/io.c
  modified:   src/sdiff.c
  modified:   src/side.c
  modified:   src/system.h
  modified:   src/util.c
  modified:   tests/help-version

Untracked files:
  (use "git add <file>..." to include in what will be committed)

  NEWS.orig
  README-hacking.orig
  README-hacking.rej
  README.orig
  README.rej
  cfg.mk.orig
  cfg.mk.rej
  git-log.txt
  git-tags.txt
  ms/config.site.orig
  quote-patch.txt
  src/cmp.c.orig
  src/context.c.orig
  src/diff.c.orig
  src/diff.c.rej
  src/diff.h.orig
  src/diff3.c.orig
  src/diff3.c.rej
  src/dir.c.orig
  src/sdiff.c.orig
  src/system.h.orig
  src/util.c.orig
  tests/help-version.orig

no changes added to commit (use "git add" and/or "git commit -a")

8. Learn how to use the Emacs functions vc-diff (C-x v =) and vc-revert (C-x v u). When you're in the *vc-diff* buffer generated by vc-diff, use describe-mode (C-h m) to find out the Emacs functions
that you can use there, and in particular learn how to use the diff-apply-hunk (C-c C-a) and diff-goto-source (C-c C-c) functions.

I used the following commands and Emacs keystrokes to learn how to use these new Emacs functions.

emacs NEWS
C-x v =
# Did not run use keystrokes C-x v u for vc-revert yet as that will be done in Step 9.
C-h m
C-x o
# Read the documentation on Diff mode.

I also consulted the online documentation for information about how to use each function:
- vc-diff: Compare the work files in the current VC fileset with the versions you started from.
- vc-revert: Revert the work file(s) in the current VC fileset to the last revision.
- diff-apply-hunk: Apply this hunk to its target file. With a prefix argument of C-u, revert this hunk, i.e. apply the reverse of the hunk, which changes the “new” version into the “old” version. If
diff-jump-to-old-file is non-nil, apply the hunk to the “old” version of the file instead.
- diff-goto-source: Go to the source file and line corresponding to this hunk. By default, this jumps to the “new” version of the file, the one shown first on the file header. With a prefix argument,
jump to the “old” version instead. If diff-jump-to-old-file is non-nil, this command by default jumps to the “old” file, and the meaning of the prefix argument is reversed. If the prefix argument is a
number greater than 8 (e.g., if you type C-u C-u C-c C-c), then this command also sets diff-jump-to-old-file for the next invocation.

9. Use Emacs to revert all the changes to files other than .c files, since you want only changes to .c files. Also, and don't forget this part, undo all the changes to .c files other than changes to
character string constants, as the character-string changes are the only changes that you want; this may require editing some files by hand.

# Use Emacs to revert all the changes to files other than .c files.

emacs NEWS
C-x v u
yes RETURN
C-x C-c

emacs README
C-x v u
yes RETURN
C-x C-c

emacs TODO
C-x v u
yes RETURN
C-x C-c

emacs doc/diagmeet.note
C-x v u
yes RETURN
C-x C-c

emacs ms/config.bat
C-x v u
yes RETURN
C-x C-c

emacs ms/config.site
C-x v u
yes RETURN
C-x C-c

emacs po/en.po
C-x v u
yes RETURN
C-x C-c

emacs src/diff.h
C-x v u
yes RETURN
C-x C-c

emacs src/system.h
C-x v u
yes RETURN
C-x C-c

emacs tests/help-version
C-x v u
yes RETURN
C-x C-c

# Undo all the changes to .c files other than changes to character string constants.

For the following files, I repeated the process below:

Files:

src/analyze.c
src/cmp.c
src/context.c
src/diff.c
src/diff3.c
src/dir.c
src/ifdef.c
src/io.c
src/sdiff.c
src/side.c
src/util.c

Process:

emacs <FILE>
C-x v =
M-n
C-c C-c
# Manually revert change if not a change to a character string constant.
C-x o
M-n
# Continue manually reverting hunks if needed.

10. Use Emacs to examine the files src/*.c.rej carefully, and copy rejected patches into the corresponding .c files as needed.

Using git status I determined that the files below are the candidates that may require copying rejected patches into the corresponding .c files. Upon inspecting the src/*.c.rej files, all the changes
are to character string constants so I manually copied them to the corresponding .c files using Emacs and incremental search forward (C-s). Also, it seems like the patch command failed patching the
hunks because the lines to change don't exist in the original file (they are slightly different and/or on different line numbers).

Files:

src/diff.c.rej
src/diff3.c.rej

11. Remove all untracked files that git status warns you about, since you don’t plan on adding any files in your patch.

git clean

Output of previous command:
fatal: clean.requireForce defaults to true and neither -i, -n nor -f given; refusing to clean

git clean -f

Output of previous command:
Removing NEWS.orig
Removing README-hacking.orig
Removing README-hacking.rej
Removing README.orig
Removing README.rej
Removing cfg.mk.orig
Removing cfg.mk.rej
Removing git-log.txt
Removing git-tags.txt
Removing ms/config.site.orig
Removing quote-patch.txt
Removing src/cmp.c.orig
Removing src/context.c.orig
Removing src/diff.c.orig
Removing src/diff.c.rej
Removing src/diff.h.orig
Removing src/diff3.c.orig
Removing src/diff3.c.rej
Removing src/dir.c.orig
Removing src/sdiff.c.orig
Removing src/system.h.orig
Removing src/util.c.orig
Removing tests/help-version.orig

12. When you’re done with the above, git status should report a half-dozen modified files, and git diff should output a patch that is three or four hundred lines long. Put that patch into a file
quote-3.0-patch.txt.

git status

Output of previous command:
HEAD detached at v3.0
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

  modified:   src/cmp.c
  modified:   src/diff.c
  modified:   src/diff3.c
  modified:   src/dir.c
  modified:   src/sdiff.c
  modified:   src/util.c

git diff | wc -l

Output of previous command:
344

git diff > quote-3.0-patch.txt

13. Build the resulting modified version of Diffutils, using the commands described in the file README-hacking, skipping the part about CVS; CVS is obsolescent. (If you are building on lnxsrv07 or
lnxsrv09 or any other host that is using version 2.16 or later of the GNU C Library, you will need to apply an additional patch after running ./bootstrap and before running ./configure, because glibc
2.16 removed the obsolete and dangerous gets function declared by a Diffutils header.) Verify that Diffutils does the right thing with the “diff . -” scenario, as well as with “diff --help”.

./bootstrap

Output of previous command:
<Too long to include>

# Check GNU C Library version (building on lnxsrv04)
ldd --version

Output of previous command:
ldd (GNU libc) 2.12
Copyright (C) 2010 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
Written by Roland McGrath and Ulrich Drepper.

# Therefore, I do not need to apply the additional patch.

./configure

Output of previous command:
<Too long to include>

make

Output of previous command:
<Too long to include>

make check

Output of previous command:
Making check in lib
make[1]: Entering directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/lib'
make  check-recursive
make[2]: Entering directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/lib'
make[3]: Entering directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/lib'
make[3]: Leaving directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/lib'
make[2]: Leaving directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/lib'
make[1]: Leaving directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/lib'
Making check in src
make[1]: Entering directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/src'
make  check-am
make[2]: Entering directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/src'
make[2]: Nothing to be done for 'check-am'.
make[2]: Leaving directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/src'
make[1]: Leaving directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/src'
Making check in tests
make[1]: Entering directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/tests'
make  check-TESTS
make[2]: Entering directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/tests'
make[3]: Entering directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/tests'
/bin/sh: /bin/sh: cannot execute binary file
Makefile:1309: recipe for target 'basic.log' failed
make[3]: *** [basic.log] Error 126
make[3]: Leaving directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/tests'
Makefile:1288: recipe for target 'check-TESTS' failed
make[2]: *** [check-TESTS] Error 2
make[2]: Leaving directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/tests'
Makefile:1403: recipe for target 'check-am' failed
make[1]: *** [check-am] Error 2
make[1]: Leaving directory '/w/home.25/cs/ugrad/stewart/Assignment7/lab/diffutils/tests'
Makefile:1016: recipe for target 'check-recursive' failed
make: *** [check-recursive] Error 1

./src/diff . -

Output of previous command:
./src/diff: cannot compare '-' to a directory

./src/diff --help

Output of previous command:
Usage: ./src/diff [OPTION]... FILES
Compare files line by line.

  -i  --ignore-case  Ignore case differences in file contents.
  --ignore-file-name-case  Ignore case when comparing file names.
  --no-ignore-file-name-case  Consider case when comparing file names.
  -E  --ignore-tab-expansion  Ignore changes due to tab expansion.
  -b  --ignore-space-change  Ignore changes in the amount of white space.
  -w  --ignore-all-space  Ignore all white space.
  -B  --ignore-blank-lines  Ignore changes whose lines are all blank.
  -I RE  --ignore-matching-lines=RE  Ignore changes whose lines all match RE.
  --strip-trailing-cr  Strip trailing carriage return on input.
  -a  --text  Treat all files as text.

  -c  -C NUM  --context[=NUM]  Output NUM (default 3) lines of copied context.
  -u  -U NUM  --unified[=NUM]  Output NUM (default 3) lines of unified context.
    --label LABEL  Use LABEL instead of file name.
    -p  --show-c-function  Show which C function each change is in.
    -F RE  --show-function-line=RE  Show the most recent line matching RE.
  -q  --brief  Output only whether files differ.
  -e  --ed  Output an ed script.
  --normal  Output a normal diff.
  -n  --rcs  Output an RCS format diff.
  -y  --side-by-side  Output in two columns.
    -W NUM  --width=NUM  Output at most NUM (default 130) print columns.
    --left-column  Output only the left column of common lines.
    --suppress-common-lines  Do not output common lines.
  -D NAME  --ifdef=NAME  Output merged file to show '#ifdef NAME' diffs.
  --GTYPE-group-format=GFMT  Similar, but format GTYPE input groups with GFMT.
  --line-format=LFMT  Similar, but format all input lines with LFMT.
  --LTYPE-line-format=LFMT  Similar, but format LTYPE input lines with LFMT.
    LTYPE is 'old', 'new', or 'unchanged'.  GTYPE is LTYPE or 'changed'.
    GFMT may contain:
      %<  lines from FILE1
      %>  lines from FILE2
      %=  lines common to FILE1 and FILE2
      %[-][WIDTH][.[PREC]]{doxX}LETTER  printf-style spec for LETTER
        LETTERs are as follows for new group, lower case for old group:
          F  first line number
          L  last line number
          N  number of lines = L-F+1
          E  F-1
          M  L+1
    LFMT may contain:
      %L  contents of line
      %l  contents of line, excluding any trailing newline
      %[-][WIDTH][.[PREC]]{doxX}n  printf-style spec for input line number
    Either GFMT or LFMT may contain:
      %%  %
      %c'C'  the single character C
      %c'\OOO'  the character with octal code OOO

  -l  --paginate  Pass the output through 'pr' to paginate it.
  -t  --expand-tabs  Expand tabs to spaces in output.
  -T  --initial-tab  Make tabs line up by prepending a tab.
  --tabsize=NUM  Tab stops are every NUM (default 8) print columns.
  --suppress-blank-empty  Suppress space or tab before empty output lines.

  -r  --recursive  Recursively compare any subdirectories found.
  -N  --new-file  Treat absent files as empty.
  --unidirectional-new-file  Treat absent first files as empty.
  -s  --report-identical-files  Report when two files are the same.
  -x PAT  --exclude=PAT  Exclude files that match PAT.
  -X FILE  --exclude-from=FILE  Exclude files that match any pattern in FILE.
  -S FILE  --starting-file=FILE  Start with FILE when comparing directories.
  --from-file=FILE1  Compare FILE1 to all operands.  FILE1 can be a directory.
  --to-file=FILE2  Compare all operands to FILE2.  FILE2 can be a directory.

  --horizon-lines=NUM  Keep NUM lines of the common prefix and suffix.
  -d  --minimal  Try hard to find a smaller set of changes.
  --speed-large-files  Assume large files and many scattered small changes.

  -v  --version  Output version info.
  --help  Output this help.

FILES are 'FILE1 FILE2' or 'DIR1 DIR2' or 'DIR FILE...' or 'FILE... DIR'.
If --from-file or --to-file is given, there are no restrictions on FILES.
If a FILE is '-', read standard input.
Exit status is 0 if inputs are the same, 1 if different, 2 if trouble.

Report bugs to: bug-diffutils@gnu.org
GNU diffutils home page: <http://www.gnu.org/software/diffutils/>
General help using GNU software: <http://www.gnu.org/gethelp/>

# Note that although we see some errors reported by the make check command, the output of both the “diff . -” and “diff --help” scenarios contain no “`” (grave accent, U+0060), so the patch was
successful.

14. Do a sanity test using the modified version of Diffutils that you just built, by using the just-built diff to compare the source code of Diffutils 3.0 to the source code of your modified version.
Put the former source code into a directory diffutils-3.0 and the latter source code into a directory diffutils-3.0-patch, and run your implementation of diff with the command
“D/diff -pru diffutils-3.0 diffutils-3.0-patch >quote-3.0-test.txt”, where the D is the directory containing your diff implementation.

mkdir diffutils-3.0
mkdir diffutils-3.0-patch
cp diffutils/src/*.c diffutils-3.0-patch/
mv diffutils diffutils-3.0-patch-full-backup
git clone https://git.savannah.gnu.org/git/diffutils.git
cd diffutils
git checkout v3.0
cd ..
cp diffutils/src/*.c diffutils-3.0/
diffutils-3.0-patch-full-backup/src/diff -pru diffutils-3.0 diffutils-3.0-patch >quote-3.0-test.txt

15. Use diff to compare the contents of quote-3.0-test.txt and quote-3.0-patch.txt. Are the files identical? If not, are the differences innocuous?

diff quote-3.0-test.txt diffutils-3.0-patch-full-backup/quote-3.0-patch.txt

From the output below we observe that the files are not identical, but the differences are innocuous. The differences are:
- quote-3.0-test.txt uses the command diff -pru, while quote-3.0-patch.txt uses diff --git
- the directories of the files being compared are different
- some function signatures seem to be cut off

These are not a problem (and therefore innocuous) because we expect the first two differences as quote-3.0-test.txt is generated by the command "diff -pru" and quote-3.0-patch.txt is generated by the
command "git diff". The last difference can likely be attributed to a output width difference between the commands as well. There are no non-trivial differences between the files, so the patch was
successful.

Output of previous command:
1,4c1,5
< diff -pru diffutils-3.0/cmp.c diffutils-3.0-patch/cmp.c
< --- diffutils-3.0/cmp.c	2019-11-20 16:14:42.966751000 -0800
< +++ diffutils-3.0-patch/cmp.c	2019-11-20 16:09:23.936962000 -0800
< @@ -115,7 +115,7 @@ try_help (char const *reason_msgid, char
---
> diff --git a/src/cmp.c b/src/cmp.c
> index 2455dc4..10a4ac1 100644
> --- a/src/cmp.c
> +++ b/src/cmp.c
> @@ -115,7 +115,7 @@ try_help (char const *reason_msgid, char const *operand)
13c14
< @@ -134,7 +134,7 @@ specify_ignore_initial (int f, char **ar
---
> @@ -134,7 +134,7 @@ specify_ignore_initial (int f, char **argptr, char delimiter)
67,69c68,71
< diff -pru diffutils-3.0/diff.c diffutils-3.0-patch/diff.c
< --- diffutils-3.0/diff.c	 2019-11-20 16:14:42.970749000 -0800
< +++ diffutils-3.0-patch/diff.c 2019-11-20 16:09:23.940962000 -0800
---
> diff --git a/src/diff.c b/src/diff.c
> index cc1b611..2a22878 100644
> --- a/src/diff.c
> +++ b/src/diff.c
127c129
< @@ -826,7 +826,7 @@ try_help (char const *reason_msgid, char
---
> @@ -826,7 +826,7 @@ try_help (char const *reason_msgid, char const *operand)
136c138
< @@ -870,11 +870,11 @@ static char const * const option_help_ms
---
> @@ -870,11 +870,11 @@ static char const * const option_help_msgid[] = {
150c152
< @@ -895,7 +895,7 @@ static char const * const option_help_ms
---
> @@ -895,7 +895,7 @@ static char const * const option_help_msgid[] = {
159c161
< @@ -918,9 +918,9 @@ static char const * const option_help_ms
---
> @@ -918,9 +918,9 @@ static char const * const option_help_msgid[] = {
171c173
< @@ -960,7 +960,7 @@ specify_value (char const **var, char co
---
> @@ -960,7 +960,7 @@ specify_value (char const **var, char const *value, char const *option)
180c182
< @@ -1159,7 +1159,7 @@ compare_files (struct comparison const *
---
> @@ -1159,7 +1159,7 @@ compare_files (struct comparison const *parent,
189,191c191,194
< diff -pru diffutils-3.0/diff3.c diffutils-3.0-patch/diff3.c
< --- diffutils-3.0/diff3.c	  2019-11-20 16:14:42.972750000 -0800
< +++ diffutils-3.0-patch/diff3.c 2019-11-20 16:09:23.943961000 -0800
---
> diff --git a/src/diff3.c b/src/diff3.c
> index 0f11fdc..fbfb28b 100644
> --- a/src/diff3.c
> +++ b/src/diff3.c
213c216
< @@ -412,7 +412,7 @@ try_help (char const *reason_msgid, char
---
> @@ -412,7 +412,7 @@ try_help (char const *reason_msgid, char const *operand)
222c225
< @@ -435,7 +435,7 @@ static char const * const option_help_ms
---
> @@ -435,7 +435,7 @@ static char const * const option_help_msgid[] = {
257,260c260,264
< diff -pru diffutils-3.0/dir.c diffutils-3.0-patch/dir.c
< --- diffutils-3.0/dir.c	2019-11-20 16:14:42.974749000 -0800
< +++ diffutils-3.0-patch/dir.c	2019-11-20 16:09:23.945962000 -0800
< @@ -154,7 +154,7 @@ compare_names (char const *name1, char c
---
> diff --git a/src/dir.c b/src/dir.c
> index 5b4eaec..5e08318 100644
> --- a/src/dir.c
> +++ b/src/dir.c
> @@ -154,7 +154,7 @@ compare_names (char const *name1, char const *name2)
269,272c273,277
< diff -pru diffutils-3.0/sdiff.c diffutils-3.0-patch/sdiff.c
< --- diffutils-3.0/sdiff.c	  2019-11-20 16:14:42.983750000 -0800
< +++ diffutils-3.0-patch/sdiff.c 2019-11-20 16:09:23.954962000 -0800
< @@ -175,7 +175,7 @@ try_help (char const *reason_msgid, char
---
> diff --git a/src/sdiff.c b/src/sdiff.c
> index 4344e8d..5bbecd8 100644
> --- a/src/sdiff.c
> +++ b/src/sdiff.c
> @@ -175,7 +175,7 @@ try_help (char const *reason_msgid, char const *operand)
290c295
< @@ -286,12 +286,12 @@ check_child_status (int werrno, int wsta
---
> @@ -286,12 +286,12 @@ check_child_status (int werrno, int wstatus, int max_ok_status,
319,321c324,327
< diff -pru diffutils-3.0/util.c diffutils-3.0-patch/util.c
< --- diffutils-3.0/util.c	 2019-11-20 16:14:42.986750000 -0800
< +++ diffutils-3.0-patch/util.c 2019-11-20 16:09:23.957964000 -0800
---
> diff --git a/src/util.c b/src/util.c
> index 3be03e9..d18bf38 100644
> --- a/src/util.c
> +++ b/src/util.c
